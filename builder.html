<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BTCBRAVE – JSON Builder (Auto Mode)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-main: #05060a;
      --bg-card: #111318;
      --accent: #d4af37;
      --accent-soft: #ffdd70;
      --text-main: #f5f5f5;
      --text-muted: #a0a4b8;
      --border-soft: #252837;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      background: radial-gradient(circle at top, #151827 0, #05060a 40%, #020308 100%);
      color: var(--text-main);
    }

    header {
      padding: 16px 24px;
      border-bottom: 1px solid var(--border-soft);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(5, 6, 10, 0.96);
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-badge {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      border: 2px solid var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .logo-text {
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: linear-gradient(90deg,#1d4ed8,#7c3aed,#ec4899,#f59e0b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .wrapper {
      max-width: 1200px;
      margin: 24px auto;
      padding: 0 18px 40px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 20px;
    }

    @media (max-width: 900px) {
      .wrapper {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: radial-gradient(circle at top left, #202538 0, #111318 45%, #05060a 100%);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.1);
      padding: 18px 18px 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.6);
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 18px;
    }

    .card small {
      color: var(--text-muted);
      font-size: 12px;
    }

    .field-group {
      margin-top: 10px;
    }

    .field-group label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
      color: var(--text-muted);
    }

    .field-group input,
    .field-group textarea {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border-soft);
      background: #05060a;
      color: var(--text-main);
      font-size: 13px;
      resize: vertical;
    }

    .inline-fields {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .btn-row {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .primary-btn {
      border-radius: 999px;
      padding: 8px 16px;
      border: none;
      background: linear-gradient(90deg,#3b82f6,#8b5cf6,#ec4899,#f97316);
      color: #fff;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
    }

    .secondary-btn {
      border-radius: 999px;
      padding: 8px 14px;
      border: 1px solid var(--border-soft);
      background: transparent;
      color: var(--text-muted);
      font-size: 12px;
      cursor: pointer;
    }

    .output-area textarea {
      width: 100%;
      min-height: 220px;
      background: #05060a;
      color: #d1fae5;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      padding: 10px;
      font-family: "JetBrains Mono", monospace;
      font-size: 12px;
      white-space: pre;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-area">
      <div class="logo-badge">B</div>
      <div>
        <div class="logo-text">BTCBRAVE JSON BUILDER</div>
        <div class="subtitle">Auto Mode – cola a notícia (1, 2 e 3) e o JSON sai pronto.</div>
      </div>
    </div>
  </header>

  <div class="wrapper">

    <!-- FORMULÁRIO ESQUERDO -->
    <div class="card">
      <h2>Colar notícia automática (1, 2 e 3)</h2>
      <small>1 – Título • 2 – Resumo • 3 – Texto completo</small>

      <div class="field-group" style="margin-top:10px;">
        <textarea id="autoText" placeholder="1 - Título&#10;&#10;2 - Resumo curto&#10;&#10;3 - Texto completo..."></textarea>
      </div>

      <div class="inline-fields">
        <div class="field-group" style="max-width:160px;">
          <label for="imgPrefix">Image Prefix (ex: a / b / aa)</label>
          <input id="imgPrefix" type="text" value="a" maxlength="4">
        </div>
        <div class="field-group" style="flex:0 0 auto; margin-top:26px;">
          <button type="button" class="primary-btn small-btn" id="useAutoText">Usar texto automaticamente</button>
        </div>
      </div>

      <hr style="margin:16px 0; border:0; border-top:1px solid rgba(255,255,255,0.08);">

      <div class="field-group">
        <label for="title">Title *</label>
        <input id="title" type="text">
      </div>

      <div class="field-group">
        <label for="description">Description *</label>
        <textarea id="description"></textarea>
      </div>

      <div class="field-group">
        <label for="link">Link *</label>
        <input id="link" type="text" placeholder="https://news.btcbrave.store/?post=slug-do-post">
      </div>

      <div class="field-group">
        <label for="thumbnail">Thumbnail *</label>
        <input id="thumbnail" type="text" placeholder="https://news.btcbrave.store/imgs/a1.png">
      </div>

      <div class="inline-fields">
        <div class="field-group">
          <label for="pubDate">Date (ISO) *</label>
          <input id="pubDate" type="text">
        </div>
        <button class="secondary-btn small-btn" id="nowBtn">Agora</button>
      </div>

      <div class="field-group">
        <label for="fullText">Full Text *</label>
        <textarea id="fullText"></textarea>
      </div>

      <div class="btn-row">
        <button class="primary-btn" id="generateBtn">Gerar JSON</button>
        <label><input type="checkbox" id="commaToggle"> vírgula no final</label>
        <button type="button" class="secondary-btn" id="clearLeftBtn">Limpar lado esquerdo</button>
      </div>
    </div>

    <!-- SAÍDA -->
    <div class="card output-area">
      <h2>JSON gerado</h2>
      <button class="primary-btn" id="copyBtn">Copiar JSON</button>

      <div class="field-group" style="margin-top:10px;">
        <textarea id="outputJson" readonly placeholder='JSON aparece aqui...'></textarea>
      </div>
    </div>
  </div>

<script>
const autoTextEl   = document.getElementById('autoText');
const imgPrefixEl  = document.getElementById('imgPrefix');
const titleEl      = document.getElementById('title');
const descEl       = document.getElementById('description');
const linkEl       = document.getElementById('link');
const thumbEl      = document.getElementById('thumbnail');
const pubDateEl    = document.getElementById('pubDate');
const fullTextEl   = document.getElementById('fullText');
const outputJsonEl = document.getElementById('outputJson');
const commaToggle  = document.getElementById('commaToggle');
const clearLeftBtn = document.getElementById('clearLeftBtn');

let imgCounter = 1;

// Botão "Agora"
document.getElementById('nowBtn').addEventListener('click', () => {
  pubDateEl.value = new Date().toISOString();
});

// AutoText (gera tudo automaticamente)
document.getElementById('useAutoText').addEventListener('click', () => {
  const raw = (autoTextEl.value || '').trim();
  if (!raw) return alert('Cole título, resumo e texto completo.');

  let blocks = raw.split(/\n\s*\n+/).map(b => b.trim()).filter(b => b);
  if (blocks.length < 3) return alert('Faltou título, resumo ou texto.');

  const clean = t => t.replace(/^\d+\s+/, '').trim();

  const title = clean(blocks[0]);
  const desc  = clean(blocks[1]);
  const body  = blocks.slice(2).map(clean);

  const html = body.map(p => `<p>${p}</p>`).join("\n\n");

  titleEl.value    = title;
  descEl.value     = desc;
  fullTextEl.value = html;
  pubDateEl.value  = new Date().toISOString();

  // imagem automática
  const imgName = `${imgPrefixEl.value}${imgCounter}.png`;
  thumbEl.value  = `https://news.btcbrave.store/imgs/${imgName}`;
  imgCounter++;

  // link automático
  const slug = title.toLowerCase()
    .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
    .replace(/[^a-z0-9\s-]/g,'')
    .trim()
    .replace(/\s+/g,'-');

  linkEl.value = `https://blog.btcbrave.store/?post=${slug}`;
});

// Gerar JSON
document.getElementById('generateBtn').addEventListener('click', () => {

  const title = titleEl.value.trim();
  const desc  = descEl.value.trim();
  const thumb = thumbEl.value.trim();
  const date  = pubDateEl.value.trim();
  const full  = fullTextEl.value.trim();
  let   link  = linkEl.value.trim();

  if (!title || !desc || !thumb || !date || !full)
    return alert("Preencha título, resumo, thumbnail, data e texto completo.");

  // se link estiver vazio → gerar automático
  if (!link) {
    const slug = title.toLowerCase()
      .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
      .replace(/[^a-z0-9\s-]/g,'')
      .trim()
      .replace(/\s+/g,'-');

    link = `https://news.btcbrave.store/?post=${slug}`;
    linkEl.value = link;
  }

  const obj = {
    title,
    description: desc,
    link,
    thumbnail: thumb,
    pubDate: date,
    fullText: full
  };

  let json = JSON.stringify(obj, null, 2);
  if (commaToggle.checked) json += ",";

  if (outputJsonEl.value.trim())
    outputJsonEl.value += "\n\n" + json;
  else
    outputJsonEl.value = json;
});

// copiar
document.getElementById('copyBtn').addEventListener('click', async () => {
  await navigator.clipboard.writeText(outputJsonEl.value);
  alert("Copiado!");
});

// limpar
clearLeftBtn.addEventListener('click', () => {
  autoTextEl.value = "";
  titleEl.value = "";
  descEl.value  = "";
  linkEl.value  = "";
  thumbEl.value = "";
  pubDateEl.value = "";
  fullTextEl.value = "";
});
</script>

</body>
</html>
